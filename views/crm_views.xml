<odoo>
    
    <record id="view_crm_lead_form_custom" model="ir.ui.view">
        <field name="name">crm.lead.form.custom</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
<!-- 
            <xpath expr="//form" position="attributes">
                <attribute name="create">0</attribute>
            </xpath> -->

            <xpath expr="//button[@name='action_set_won_rainbowman']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            

            <!-- Hide two 'Lost' buttons  -->
            <xpath expr="//button[@name='%(crm.crm_lead_lost_action)d'][1]" position="attributes">
                <attribute name="invisible">1</attribute>        
             </xpath>
            <xpath expr="//button[@name='%(crm.crm_lead_lost_action)d'][2]" position="attributes">
                <attribute name="invisible">1</attribute>                 
            </xpath>

            <xpath expr="//button[@name='action_view_sale_quotation']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='action_view_sale_order']" position="after">
                <button class="oe_stat_button" type="object" name="action_view_invoice" icon="fa-pencil-square-o" invisible="type == 'lead' or invoice_count==0">
                    <field name="invoice_count" widget="statinfo" string="Invoices"/>
                </button>
            </xpath>


            <xpath expr="//button[@name='action_set_won_rainbowman']" position="before">
                <field name="sale_order_id" invisible="1"/>
                <field name="invoice_status" invisible="1"/>
                <field name="is_won" invisible="1"/>
                <button name="action_create_invoice" type="object" class="oe_highlight" string="Create Invoice" invisible="invoice_status!='to invoice' or not sale_order_id"/>
                <button name="action_create_sale_order" string="Confirm Sale" type="object" class="btn-primary" title="Confirm Sale" invisible="not active or not partner_id or not course_id or not is_won or sale_order_id or type == 'lead'"/>
            </xpath>

            <xpath expr="//widget[@name='web_ribbon']" position="before">
                <field name="avatar_128" invisible="1"/>
                <field name="image_1920" widget="image" class="oe_avatar" options="{&quot;preview_image&quot;: &quot;avatar_128&quot;}"/>
            </xpath>

            <xpath expr="//div[@id='probability']" position="attributes">
                <attribute name="invisible">type=='lead'</attribute>
            </xpath>
            <xpath expr="//label[@for='probability']" position="attributes">
                <attribute name="invisible">type=='lead'</attribute>
            </xpath>

            <xpath expr="//field[@name='probability']" position="attributes">
                <attribute name="readonly">1</attribute>
            </xpath>
            <xpath expr="//field[@name='expected_revenue']" position="attributes">
                <attribute name="readonly">1</attribute>
            </xpath>



            <xpath expr="//button[@name='action_sale_quotations_new']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//group[1]" position="inside">

                <group>
                    <field name="mobile_alt"/>
                    <field name="whatsapp_number" string="WhatsApp Number" required="0"/>
                    <field name="date_of_birth" required="0"/>
                    <field name="age"/>
                    <field name="father_guardian"/>
                </group>
                <group>
                    <field name="referred_by"/>
                    <field name="course_id" required="0"/>
                    <field name="qualification" required="0"/>
                    <field name="enrollment_number"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="mode_of_study" string="Mode of Study" required="0"/>
                </group>
            </xpath>

            <!-- <xpath expr="//group[@name='lead_partner']" position="attributes">
                <attribute name="invisible">0</attribute>
            </xpath> -->

            <!-- <xpath expr="//group[@name='lead_info']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <xpath expr="//group[@name='opportunity_partner']//field[@name='partner_id']" position="after">
                <label for="street" string="Address"/>
                <div class="o_address_format">
                    <field name="street" placeholder="Street..." class="o_address_street"/>
                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                    <field name="city" placeholder="City" class="o_address_city"/>
                    <field name="state_id" class="o_address_state" placeholder="State" options="{&quot;no_open&quot;: True}"/>
                    <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                    <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                </div>            
            </xpath>

            <xpath expr="//group[@name='lead_info']//label[@for='contact_name']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//group[@name='lead_info']//div[hasclass('o_row')]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='partner_name']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='email_cc']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='function']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//group[@name='lead_partner']//field[@name='country_id']" position="before">
                <field name="district" placeholder="District"/>
            </xpath>

            <xpath expr="//field[@name='website']" position="attributes">
                <attribute name="invisible">1</attribute>                
            </xpath>

            <!-- <xpath expr="//notebook//page[@name='lead']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//notebook//page[@name='extra']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath> -->

            <!-- <xpath expr="//group[@name='lead_info']//field[@name='email_from']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//group[@name='opportunity_partner']//field[@name='email_from']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//group[@name='lead_info']//field[@name='phone']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//group[@name='opportunity_partner']//field[@name='phone']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath> -->

            <xpath expr="//page[@name='internal_notes']" position="before">
                <page string="Banking &amp; Other Details">
                    <group>
                        <group>
                            <field name="aadhaar_no" />
                            <field name="bank_account_name"/>
                            <field name="bank_account_no"/>
                            <field name="bank_ifsc_code"/>
                            <field name="bank_name"/>
                            <field name="relation_with_bank_acc_holder"/>
                            <field name="relation_with_bank_acc_holder_manual" invisible="relation_with_bank_acc_holder!='other'"/>
                        </group>
                    </group>
                </page>
            </xpath>

            <xpath expr="//field[@name='source_id']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
        </field>
    </record>

    
    <record id="view_crm_team_form_custom" model="ir.ui.view">
        <field name="name">crm.team.form.custom</field>
        <field name="model">crm.team</field>
        <field name="inherit_id" ref="sales_team.crm_team_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Queue Lines" invisible="0">
                    <field name="queue_line_ids">
                        <tree>
                            <field name="salesperson_id"/>
                            <field name="current_lead" string="Last Assigned Lead"/>
                        </tree>
                    </field>

                </page>
            </xpath>
        </field>
    </record>

    <record id="view_crm_lead_kanban_custom" model="ir.ui.view">
        <field name="name">crm.lead.kanban.custom</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_kanban_view_leads"/>
        <field name="arch" type="xml">   
            <xpath expr="//kanban" position="attributes">
                <attribute name="create">0</attribute>
            </xpath> 
        </field>
    </record>

    <record id="view_crm_stage_form_custom" model="ir.ui.view">
        <field name="name">crm.stage.form.custom</field>
        <field name="model">crm.stage</field>
        <field name="inherit_id" ref="crm.crm_stage_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='is_won']" position="before">
                <field name="probability"/>
            </xpath>
        </field>
    </record>


    <!-- Override Window Action to remove default_type as opportunity -->
    <record model="ir.actions.act_window" id="crm.crm_lead_action_pipeline">
        <field name="name">Pipeline</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">kanban,tree,graph,pivot,form,calendar,activity</field>
        <field name="domain">[('type','=','opportunity')]</field>
        <field name="context">
            {'search_default_assigned_to_me': 1}
        </field>
        <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
    </record>

    <menuitem id="menu_crm_lead_import" name="Import Leads" parent="crm.crm_menu_root" action="tijus_crm_custom.action_crm_lead_import"/>
    
    <record id="action_crm_lead_import" model="ir.actions.act_window">
        <field name="name">Import Leads</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'default_type': 'lead'}</field>
    </record>
    
    <record id="view_crm_lead_import_form" model="ir.ui.view">
        <field name="name">crm.lead.import.form</field>
        <field name="model">crm.lead</field>
        <field name="arch" type="xml">
            <form string="Import Leads">
                <sheet>
                    <group>
                        <field name="name" string="Opportunity"/>
                        <field name="partner_id" string="Customer"/>
                        <field name="email_from" string="Email"/>
                        <field name="phone" string="Phone"/>
                        <field name="source_id" string="Source"/>
                        <field name="course_id"/>
                        <field name="date_deadline"/>
                        <field name="city" string="City/Town"/>
                        <field name="referred_by" string="Referred By"/>
                        <field name="team_id" string="Sales Team"/>
                    </group>
                    <footer>
                        <button string="Import" type="object" name="action_import_lead" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </sheet>
            </form>
        </field>
    </record>
</odoo>
