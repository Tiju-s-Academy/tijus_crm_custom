<odoo>
    
    <record id="view_crm_lead_form_custom" model="ir.ui.view">
        <field name="name">crm.lead.form.custom</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
<!-- 
            <xpath expr="//form" position="attributes">
                <attribute name="create">0</attribute>
            </xpath> -->

            <xpath expr="//button[@name='action_set_won_rainbowman']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='%(crm.crm_lead_lost_action)d']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//div[@id='probability']" position="attributes">
                <attribute name="invisible">type!='opportunity'</attribute>
            </xpath>
            <xpath expr="//label[@for='probability']" position="attributes">
                <attribute name="invisible">type!='opportunity'</attribute>
            </xpath>


            <xpath expr="//button[@name='action_sale_quotations_new']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//group[1]" position="inside">

                <group>
                    <field name="mobile_alt"/>
                    <field name="whatsapp_number" string="WhatsApp Number"/>
                    <field name="date_of_birth"/>
                    <field name="age"/>
                    <field name="father_guardian"/>
                    <field name="qualification"/>
                    <field name="course_id"/>
                </group>
                <group>
                    <field name="city"/>
                    <field name="country_id" invisible="1"/>
                    <field name="state_id" domain="[('country_id','=',country_id)]"/>
                    <field name="district"/>
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="enrollment_number"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="mode_of_study" string="Mode of Study"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="view_crm_lead_kanban_custom" model="ir.ui.view">
        <field name="name">crm.lead.kanban.custom</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_kanban_view_leads"/>
        <field name="arch" type="xml">   
            <xpath expr="//kanban" position="attributes">
                <attribute name="create">0</attribute>
            </xpath> 
        </field>
    </record>

    <record id="view_crm_stage_form_custom" model="ir.ui.view">
        <field name="name">crm.stage.form.custom</field>
        <field name="model">crm.stage</field>
        <field name="inherit_id" ref="crm.crm_stage_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='is_won']" position="before">
                <field name="probability"/>
            </xpath>
        </field>
    </record>


    <!-- Override Window Action to remove default_type as opportunity -->
    <record model="ir.actions.act_window" id="crm.crm_lead_action_pipeline">
        <field name="name">Pipeline</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">kanban,tree,graph,pivot,form,calendar,activity</field>
        <field name="domain">[('type','=','opportunity')]</field>
        <field name="context">
            {'search_default_assigned_to_me': 1}
        </field>
        <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
    </record>
</odoo>
